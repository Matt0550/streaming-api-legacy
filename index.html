<!DOCTYPE html>
<!--
Copyright Â©Matt05 Dev
Github: @Matt0550
Website: https://matt05.ml
-->
<html>
    <head>
        <title>Redirecting...</title>
    </head>
    <body>
        <p id="text">Redirecting...</p>
        <footer>
            &copy;<a href="https://matt05.ml" target="_blank">Matt05 Dev</a>
            <br>
            Github: <a href="https://github.com/Matt0550/streaming-api/" target="_blank">Matt05 Dev</a>
        </footer>
    <script>
        function redirect(afterLastSlash) {
            var xmlhttp = new XMLHttpRequest();
            var url = "./v1/"+afterLastSlash;

            xmlhttp.onreadystatechange = function() {
                if (this.readyState == 4 && this.status == 200) {
                    var myArr = JSON.parse(this.responseText);
                    console.log(myArr.message);
                    window.location.replace(myArr.message);

                } else if (this.status == 500){
                    document.getElementById("text").innerHTML = "Error!";

                    console.log("Error!");
                }
            };
            xmlhttp.open("GET", url, true);
            xmlhttp.send(); 
        }
        var str = window.location.href;

        const afterLastSlash = str.substring(str.lastIndexOf('/') + 1); // Get website
        
        if(afterLastSlash == "eurostreaming") {
            redirect(afterLastSlash);

        } else if (afterLastSlash == "altadefinizione") {
            redirect(afterLastSlash);
        } else if (afterLastSlash == "cb01") {
            redirect(afterLastSlash);
        } else {
            document.getElementById("text").innerHTML = "Website not valid!";
        }
    </script>
    </body>
</html>